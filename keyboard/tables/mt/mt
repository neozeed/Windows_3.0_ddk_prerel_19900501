# Makefile to generate kbdXX.asm from XXn.wk2 (1 <= n <= 6)
# The binary files XXn.wk2 were generated by assembling, and
# linking the Windows 2.03 XXn.asm files and converting them
# to binary files with EXE2BIN.

# Compile C program

mt.exe: mt.c vknames.h vkonames.h vkoem.h vkwin.h
    cl -c -Ox mt.c
    link mt,,,slibcec/NOD;
    command /c del kbd??.asm

# force regeneration of .asm files if TEM.TEM is edited
tem.t: tem.tem
    command /c del kbd??.asm
    command /c copy tem.tem tem.t

# ##### Assemble 2.0 translation tables to binary.

ic1.wk2: ic1.asm
	masm -DBINTABLE ic1;
	link ic1;
	exe2bin ic1.exe ic1.wk2

da2.wk2: da2.asm
	masm -DBINTABLE da2;
	link da2;
	exe2bin da2.exe da2.wk2

ic4.wk2: ic4.asm
	masm -DBINTABLE ic4;
	link ic4;
	exe2bin ic4.exe ic4.wk2

da5.wk2: da5.asm
	masm -DBINTABLE -DERICSSON da5;
	link da5;
	exe2bin da5.exe da5.wk2

da6.wk2: da6.asm
	masm -DBINTABLE -DERICSSON da6;
	link da6;
	exe2bin da6.exe da6.wk2


# ##### Create translation tables:  ###########


# Icelandic table -- 86-key table same as 83.  Only 1 and 4 defined
# specially for Icelandic
kbdic.asm: ic1.wk2 da2.wk2 ic1.wk2 ic4.wk2 da5.wk2 da6.wk2
	mt $** $@

